<!-- MODULE INGREDIENTS -->
<div class="ingredients-module" id="ingredients-module-1">
  <style>
    .ingredients-module {
      background: #f9fafc;
      border-radius: 12px;
      padding: 0;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      max-width: 600px;
      margin: 20px auto;
      font-family: "Segoe UI", Roboto, sans-serif;
      overflow: hidden;
      border: 1px solid #e3e8ef;
    }
    .ingredients-module .header {
      background: linear-gradient(90deg, #4f46e5, #3b82f6);
      color: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 14px 18px;
    }
    .ingredients-module .title { font-size: 18px; font-weight: bold; }
    .ingredients-module .subtitle { font-size: 13px; opacity: 0.9; }
    .ingredients-module .controls input {
      width: 70px; padding: 6px; border-radius: 6px;
      border: 1px solid #ddd; outline: none; font-size: 14px;
      text-align: center;
    }
    .ingredients-module .controls input:focus {
      border-color: #3b82f6; box-shadow: 0 0 0 3px rgba(59,130,246,0.3);
    }
    .ingredients-module table { width:100%; border-collapse: collapse; margin:0; background:white; }
    .ingredients-module th {
      text-align:left; background:#eef2ff; color:#374151; padding:10px;
      font-size:14px; border-bottom:2px solid #dbeafe;
    }
    .ingredients-module td {
      padding:10px; border-bottom:1px solid #f3f4f6; font-size:14px; color:#111827;
    }
    .ingredients-module tr:hover td { background: #f9fafb; }
    .ingredients-module td.right { text-align:right; }
    .ingredients-module td.unit { color:#6b7280; font-size:13px; }

    .ingredients-module .actions { padding:14px 18px; background:#fff; text-align:right; }
    .ingredients-module button.add-btn {
      background: linear-gradient(90deg,#10b981,#059669); color:white;
      border:none; padding:10px 16px; font-size:14px; font-weight:600;
      border-radius:8px; cursor:pointer; transition:0.2s;
    }
    .ingredients-module button.add-btn:hover { opacity:0.9; transform:scale(1.02); }
    .ingredients-module .msg { font-size:13px; color:#047857; margin-top:6px; text-align:right; }
  </style>

  <div class="header">
    <div>
      <div class="title">üßÇ Recette</div>
      <div class="subtitle">Ajuste les quantit√©s selon le nombre de personnes</div>
    </div>
    <div class="controls">
      <label for="people-count-1">Personnes</label>
      <input id="people-count-1" type="number" min="1" value="2">
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>Ingr√©dient</th>
        <th>Qt√© / pers.</th>
        <th>Total</th>
        <th>Unit√©</th>
      </tr>
    </thead>
    <tbody id="ingredients-body-1"></tbody>
  </table>

  <div class="actions">
    <button class="add-btn" id="addToList-1">‚ûï Ajouter √† la liste de courses</button>
    <div class="msg" id="addMsg-1"></div>
  </div>

  <script>
    const ingredientsData1 = [
      { name: "P√¢tes", qtyPerPerson: 100, unit: "g" },
      { name: "Tomates", qtyPerPerson: 80, unit: "g" },
      { name: "Huile d'olive", qtyPerPerson: 5, unit: "ml" },
      { name: "Sel", qtyPerPerson: 1, unit: "g" }
    ];

    const tbody1 = document.getElementById("ingredients-body-1");
    const peopleInput1 = document.getElementById("people-count-1");
    const addButton1 = document.getElementById("addToList-1");
    const addMsg1 = document.getElementById("addMsg-1");

    function renderIngredients1() {
      const people = Math.max(1, Number(peopleInput1.value) || 1);
      tbody1.innerHTML = "";
      ingredientsData1.forEach(ing => {
        const total = ing.qtyPerPerson * people;
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${ing.name}</td>
          <td>${ing.qtyPerPerson}</td>
          <td class="right">${total}</td>
          <td class="unit">${ing.unit}</td>
        `;
        tbody1.appendChild(row);
      });
    }

    function addToShoppingList1() {
      const people = Math.max(1, Number(peopleInput1.value) || 1);
      const calculated = ingredientsData1.map(ing => ({
        name: ing.name,
        total: ing.qtyPerPerson * people,
        unit: ing.unit
      }));

      let currentList = JSON.parse(localStorage.getItem("listeDeCourses-1") || "[]");
      calculated.forEach(item => {
        const existing = currentList.find(i => i.name === item.name && i.unit === item.unit);
        if (existing) existing.total += item.total;
        else currentList.push(item);
      });

      localStorage.setItem("listeDeCourses-1", JSON.stringify(currentList));
      addMsg1.textContent = "‚úÖ Ajout√© !";
      setTimeout(() => (addMsg1.textContent = ""), 2000);
    }

    peopleInput1.addEventListener("input", renderIngredients1);
    addButton1.addEventListener("click", addToShoppingList1);
    renderIngredients1();
  </script>
</div>

